<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Lunar Scan</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <header>
        <h1>Lunar Scan</h1>
        <nav>
            <ul>
                <li><a href="#obras-andamento">Obras em Andamento</a></li>
                <li><a href="#obras-concluidas">Obras Concluídas</a></li>
                <li><a href="#contatos">Contatos</a></li>
            </ul>
        </nav>
    </header>

    <section id="search">
        <h2>Pesquisar</h2>
        <form id="search-form">
            <input type="text" id="search-input" placeholder="Digite o nome da obra...">
            <button type="submit">
                <i class="fas fa-search"></i> <!-- Ícone de pesquisa FontAwesome -->
            </button>
        </form>
    </section>

    <section id="obras-recentes">
        <h2>Obras em andamento.</h2>
        <div class="obra">
            <a href="Kalli/Kalli.html">
                <img src="https://img.lermanga.org/K/kalli-the-champion/capa.jpg" alt="Capa da Obra 1">
                <h3>Kalli the champion</h3>
            </a>
        </div>

        <div class="obra">
            <a href="pagina_obra.html=solo-leveling">
              <div class="thumb">
                <img src="https://meo.comick.pictures/ZXgN7x-s.jpg" alt="Capa da Obra 1">
              </div>
              <div class="info">
                <h3>Solo Leveling</h3>
                <p><strong>52 capítulos</strong></p>             
            </div>
            </a>
          </div>

        <div class="obra">
            <a href="pagina_obra.html=-">
                <img src="https://img.lermanga.org/0/100-nen-no-oshi/capa.jpg" alt="Capa da Obra 2">
                <h3>100-nen no oshi</h3>
            </a>
        </div>
        <div class="obra">
            <a href="pagina_obra.html=-">
                <img src="https://img.lermanga.org/0/100-nen-no-oshi/capa.jpg" alt="Capa da Obra 2">
                <h3>100-nen no oshi</h3>
            </a>
        </div>
        <div class="obra">
            <a href="pagina_obra.html=-">
                <img src="https://img.lermanga.org/0/100-nen-no-oshi/capa.jpg" alt="Capa da Obra 2">
                <h3>100-nen no oshi</h3>
            </a>
        </div>
        <!-- Adicione mais obras recentes conforme necessário -->
    </section>

    <script>
// Código JavaScript para lidar com a pesquisa
document.addEventListener("DOMContentLoaded", function () {
    const searchForm = document.getElementById("search-form");
    const searchInput = document.getElementById("search-input");
    const obras = document.querySelectorAll(".obra");

    searchForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const searchTerm = searchInput.value.toLowerCase();

        obras.forEach(function (obra) {
            const obraNome = obra.querySelector("h3").textContent.toLowerCase();
            
            if (obraNome.includes(searchTerm)) {
                obra.style.display = "block"; // Mostrar a obra se corresponder à pesquisa
            } else {
                obra.style.display = "none"; // Ocultar a obra se não corresponder à pesquisa
            }
        });
    });

    // Resetar a pesquisa quando o campo de pesquisa estiver vazio
    searchInput.addEventListener("input", function () {
        if (searchInput.value.trim() === "") {
            obras.forEach(function (obra) {
                obra.style.display = "block"; // Mostrar todas as obras se o campo estiver vazio
            });
        }
    });
});

// Verifique se já existe uma contagem armazenada no localStorage
if (localStorage.getItem('visualizacoes')) {
    var visualizacoes = parseInt(localStorage.getItem('visualizacoes'));
    visualizacoes++;
    localStorage.setItem('visualizacoes', visualizacoes);
} else {
    // Se não houver contagem, inicie com 1
    localStorage.setItem('visualizacoes', '1');
}

// Exiba a contagem de visualizações
var contador = document.getElementById('contador');
contador.textContent = localStorage.getItem('visualizacoes');

const chapters = document.querySelectorAll('.chapter');

chapters.forEach((chapter, index) => {
  chapter.addEventListener('click', () => {
    const chapterNumber = index + 1;
    addChapterToStorage(chapterNumber);
    chapter.classList.add('visited');
  });
  chapter.setAttribute('data-chapter', index + 1);
});

if (!localStorage.getItem('chaptersRead')) {
  localStorage.setItem('chaptersRead', JSON.stringify([]));
}

const chapterList = JSON.parse(localStorage.getItem('chaptersRead'));
chapters.forEach((chapter) => {
  const chapterNumber = Number(chapter.getAttribute('data-chapter'));

  if (chapterList.includes(chapterNumber)) {
    chapter.classList.add('visited');
  }
});

function addChapterToStorage(chapterNumber) {
  const chapterList = JSON.parse(localStorage.getItem('chaptersRead'));
  if (!chapterList.includes(chapterNumber)) {
    chapterList.push(chapterNumber);
    localStorage.setItem('chaptersRead', JSON.stringify(chapterList));
  }
}

const stars = document.querySelectorAll('input[name="rating"]');
let selectedRating;

stars.forEach(star => {
    star.addEventListener('change', () => {
        selectedRating = star.value;

        // Aqui você pode enviar a classificação para o servidor, por exemplo, via AJAX.
        // Lembre-se de implementar a lógica do lado do servidor para salvar a classificação.
    });
});

    </script>
</body>
</html>
